function favorites_after_button_submit(t,a,o,e){}function favorites_after_initial_load(t){}var Favorites=Favorites||{};Favorites.Utilities=function(){var t=this,a=jQuery;t.isFavorite=function(t,o){var e=!1;return a.each(o,function(a,o){o.post_id===parseInt(t)&&(e=!0),parseInt(o.post_id)===t&&(e=!0)}),e},t.objectLength=function(t){var a,o=0;for(a in t)t.hasOwnProperty(a)&&o++;return o},t.siteIndex=function(t){for(var a=0;a<Favorites.userFavorites.length;a++)if(Favorites.userFavorites[a].site_id===parseInt(t))return a},t.getThumbnail=function(t,a){var o=t.thumbnails;if(void 0===o||0==o.length)return!1;var e=o[a];return void 0!==e&&(e||!1)}},(Favorites=Favorites||{}).Formatter=function(){var t=this,a=jQuery;t.addFavoriteCount=function(t,a){return Favorites.jsData.button_options.include_count?(a<=0&&(a=0),t+=' <span class="simplefavorite-button-count">'+a+"</span>"):t},t.decrementAllCounts=function(){for(var t=a(".simplefavorite-button.active.has-count"),o=0;o<t.length;o++){var e=a(t)[o],i=a(e).find(".simplefavorite-button-count"),s=a(i).text()-1;a(e).attr("data-favoritecount",s)}}},(Favorites=Favorites||{}).ButtonOptionsFormatter=function(){var t=this,a=jQuery;t.options=Favorites.jsData.button_options,t.formatter=new Favorites.Formatter,t.format=function(a,o){t.options.custom_colors&&t.colors(a,o),t.html(a,o)},t.html=function(o,e){var i=a(o).attr("data-favoritecount"),s=t.options.button_type,n="";return"custom"===t.options.button_type?(e&&a(o).html(t.formatter.addFavoriteCount(Favorites.jsData.favorited,i)),e||a(o).html(t.formatter.addFavoriteCount(Favorites.jsData.favorite,i)),t.applyIconColor(o,e),void t.applyCountColor(o,e)):e?(n+='<i class="'+s.icon_class+'"></i> ',n+=s.state_active,void a(o).html(t.formatter.addFavoriteCount(n,i))):(n+='<i class="'+s.icon_class+'"></i> ',n+=s.state_default,a(o).html(t.formatter.addFavoriteCount(n,i)),t.applyIconColor(o,e),void t.applyCountColor(o,e))},t.colors=function(o,e){if(t.options.custom_colors){if(e)return(i=t.options.active).background_active&&a(o).css("background-color",i.background_active),i.border_active&&a(o).css("border-color",i.border_active),void(i.text_active&&a(o).css("color",i.text_active));var i=t.options.default;i.background_default&&a(o).css("background-color",i.background_default),i.border_default&&a(o).css("border-color",i.border_default),i.text_default&&a(o).css("color",i.text_default),t.boxShadow(o)}},t.boxShadow=function(o){t.options.box_shadow||(a(o).css("box-shadow","none"),a(o).css("-webkit-box-shadow","none"),a(o).css("-moz-box-shadow","none"))},t.applyIconColor=function(o,e){t.options.custom_colors&&(e&&t.options.active.icon_active&&a(o).find("i").css("color",t.options.active.icon_active),!e&&t.options.default.icon_default&&a(o).find("i").css("color",t.options.default.icon_default))},t.applyCountColor=function(o,e){t.options.custom_colors&&(e&&t.options.active.count_active?a(o).find(Favorites.selectors.count).css("color",t.options.active.count_active):!e&&t.options.default.count_default&&a(o).find(Favorites.selectors.count).css("color",t.options.default.count_default))}},(Favorites=Favorites||{}).NonceGenerator=function(){var t=this,a=jQuery;return t.bindEvents=function(){a(document).ready(function(){t.getNonce()})},t.getNonce=function(){""!==Favorites.jsData.cache_enabled?a.ajax({url:Favorites.jsData.ajaxurl,type:"post",datatype:"json",data:{action:Favorites.formActions.nonce},success:function(t){Favorites.jsData.nonce=t.nonce,a(document).trigger("favorites-nonce-generated",[t.nonce])}}):Favorites.jsData.nonce=favorites_data.nonce},t.bindEvents()},(Favorites=Favorites||{}).UserFavorites=function(){var t=this,a=jQuery;return t.initialLoad=!1,t.bindEvents=function(){a(document).on("favorites-nonce-generated",function(){t.initalLoad=!0,t.getFavorites()})},t.getFavorites=function(){a.ajax({url:Favorites.jsData.ajaxurl,type:"post",datatype:"json",data:{action:Favorites.formActions.favoritesarray},success:function(o){Favorites.userFavorites=o.favorites,a(document).trigger("favorites-user-favorites-loaded",[t.initalLoad]),t.initalLoad&&favorites_after_initial_load(Favorites.userFavorites)}})},t.bindEvents()},(Favorites=Favorites||{}).Clear=function(){var t=this,a=jQuery;return t.activeButton,t.utilities=new Favorites.Utilities,t.formatter=new Favorites.Formatter,t.bindEvents=function(){a(document).on("click",Favorites.selectors.clear_button,function(o){o.preventDefault(),t.activeButton=a(this),t.clearFavorites()}),a(document).on("favorites-updated-single",function(){t.updateClearButtons()}),a(document).on("favorites-user-favorites-loaded",function(){t.updateClearButtons()})},t.clearFavorites=function(){t.loading(!0);var o=a(t.activeButton).attr("data-siteid");a.ajax({url:Favorites.jsData.ajaxurl,type:"post",datatype:"json",data:{action:Favorites.formActions.clearall,nonce:Favorites.jsData.nonce,siteid:o},success:function(e){t.formatter.decrementAllCounts(),t.loading(!1),t.clearSiteFavorites(o),a(document).trigger("favorites-cleared",[t.activeButton])}})},t.loading=function(o){if(o)return a(t.activeButton).addClass(Favorites.cssClasses.loading),void a(t.activeButton).attr("disabled","disabled");a(t.activeButton).removeClass(Favorites.cssClasses.loading)},t.updateClearButtons=function(){for(var o,e,i=0;i<a(Favorites.selectors.clear_button).length;i++){o=a(Favorites.selectors.clear_button)[i],e=a(o).attr("data-siteid");for(var s=0;s<Favorites.userFavorites.length;s++)Favorites.userFavorites[s].site_id===parseInt(e)&&(t.utilities.objectLength(Favorites.userFavorites[s].posts)>0?a(o).attr("disabled",!1):a(o).attr("disabled","disabled"))}},t.clearSiteFavorites=function(t){a.each(Favorites.userFavorites,function(a,o){this.site_id===parseInt(t)&&(Favorites.userFavorites[a].posts={})})},t.bindEvents()},(Favorites=Favorites||{}).Lists=function(){var t=this,a=jQuery;return t.utilities=new Favorites.Utilities,t.buttonFormatter=new Favorites.ButtonOptionsFormatter,t.bindEvents=function(){a(document).on("favorites-updated-single",function(){t.updateAllLists()}),a(document).on("favorites-cleared",function(){t.updateAllLists()}),a(document).on("favorites-user-favorites-loaded",function(){t.updateAllLists()})},t.updateAllLists=function(){for(var o=0;o<Favorites.userFavorites.length;o++)for(var e=a(Favorites.selectors.list+'[data-siteid="'+Favorites.userFavorites[o].site_id+'"]'),i=0;i<a(e).length;i++){var s=a(e)[i];t.updateSingleList(s)}},t.updateSingleList=function(o){var e=a(o).attr("data-userid"),i=a(o).attr("data-siteid"),s=a(o).attr("data-includelinks"),n=a(o).attr("data-includebuttons"),r=a(o).attr("data-includethumbnails"),u=a(o).attr("data-thumbnailsize"),c=a(o).attr("data-includeexcerpts"),d=a(o).attr("data-posttypes");a.ajax({url:Favorites.jsData.ajaxurl,type:"post",dataType:"json",data:{action:Favorites.formActions.favoritelist,nonce:Favorites.jsData.nonce,userid:e,siteid:i,include_links:s,include_buttons:n,include_thumbnails:r,thumbnail_size:u,include_excerpt:c,post_types:d},success:function(e){var i=a(e.list);a(o).replaceWith(i),t.removeButtonLoading(i),a(document).trigger("favorites-list-updated",[i])},error:function(t){console.log("There was an error updating the list."),console.log(o),console.log(t)}})},t.removeButtonLoading=function(o){var e=a(o).find(Favorites.selectors.button);a.each(e,function(){t.buttonFormatter.format(a(this),!1),a(this).removeClass(Favorites.cssClasses.active),a(this).removeClass(Favorites.cssClasses.loading)})},t.removeInvalidListItems=function(o,e){var i=a(o).find("li[data-postid]");a.each(i,function(o,i){var s=a(this).attr("data-postid");t.utilities.isFavorite(s,e)||a(this).remove()})},t.bindEvents()},(Favorites=Favorites||{}).Button=function(){var t=this,a=jQuery;return t.activeButton,t.allButtons,t.authenticated=!0,t.formatter=new Favorites.Formatter,t.data={},t.bindEvents=function(){a(document).on("click",Favorites.selectors.button,function(o){o.preventDefault(),t.activeButton=a(this),t.setAllButtons(),t.submitFavorite()})},t.setAllButtons=function(){var o=a(t.activeButton).attr("data-postid");t.allButtons=a('button[data-postid="'+o+'"]')},t.setData=function(){t.data.post_id=a(t.activeButton).attr("data-postid"),t.data.site_id=a(t.activeButton).attr("data-siteid"),t.data.status=a(t.activeButton).hasClass("active")?"inactive":"active"},t.submitFavorite=function(){t.loading(!0),t.setData(),a.ajax({url:Favorites.jsData.ajaxurl,type:"post",dataType:"json",data:{action:Favorites.formActions.favorite,nonce:Favorites.jsData.nonce,postid:t.data.post_id,siteid:t.data.site_id,status:t.data.status},success:function(o){if("unauthenticated"===o.status)return t.loading(!1),t.data.status="inactive",t.authenticated=!1,t.resetButtons(),void a(document).trigger("favorites-require-authentication",[t.data]);Favorites.userFavorites=o.favorites,t.loading(!1),t.resetButtons(),a(document).trigger("favorites-updated-single",[o.favorites,t.data.post_id,t.data.site_id,t.data.status]),favorites_after_button_submit(o.favorites,t.data.post_id,t.data.site_id,t.data.status)}})},t.resetButtons=function(){var o=parseInt(a(t.activeButton).attr("data-favoritecount"));a.each(t.allButtons,function(){if("inactive"===t.data.status)return o<=0&&(o=1),a(this).removeClass(Favorites.cssClasses.active),a(this).attr("data-favoritecount",o-1),void(t.authenticated?a(this).html(t.formatter.addFavoriteCount(Favorites.jsData.favorite,o-1)):a(this).html(Favorites.jsData.favorite));a(this).addClass(Favorites.cssClasses.active),a(this).attr("data-favoritecount",o+1),a(this).html(t.formatter.addFavoriteCount(Favorites.jsData.favorited,o+1))})},t.loading=function(o){o?a.each(t.allButtons,function(){a(this).attr("disabled","disabled"),a(this).addClass(Favorites.cssClasses.loading),a(this).html(t.addLoadingIndication())}):a.each(t.allButtons,function(){a(this).attr("disabled",!1),a(this).removeClass(Favorites.cssClasses.loading)})},t.addLoadingIndication=function(a){return"1"!==Favorites.jsData.indicate_loading?a:"active"===t.data.status?Favorites.jsData.loading_text+Favorites.jsData.loading_image_active:Favorites.jsData.loading_text+Favorites.jsData.loading_image},t.bindEvents()},(Favorites=Favorites||{}).ButtonUpdater=function(){var t=this,a=jQuery;return t.utilities=new Favorites.Utilities,t.formatter=new Favorites.Formatter,t.buttonFormatter=new Favorites.ButtonOptionsFormatter,t.activeButton,t.data={},t.bindEvents=function(){a(document).on("favorites-user-favorites-loaded",function(){t.updateAllButtons()}),a(document).on("favorites-cleared",function(){t.updateAllButtons()}),a(document).on("favorites-updated-single",function(){t.updateAllButtons()}),a(document).on("favorites-list-updated",function(a,o){t.updateAllButtons(o)})},t.updateAllButtons=function(o){for(var e=void 0===typeof o&&""!==o?a(o).find(Favorites.selectors.button):a(Favorites.selectors.button),i=0;i<a(e).length;i++)t.activeButton=a(e)[i],t.setButtonData(),t.utilities.isFavorite(t.data.postid,t.data.site_favorites)?(t.buttonFormatter.format(a(t.activeButton),!0),a(t.activeButton).addClass(Favorites.cssClasses.active),a(t.activeButton).removeClass(Favorites.cssClasses.loading)):(t.buttonFormatter.format(a(t.activeButton),!1),a(t.activeButton).removeClass(Favorites.cssClasses.active),a(t.activeButton).removeClass(Favorites.cssClasses.loading))},t.setButtonData=function(){t.data.postid=a(t.activeButton).attr("data-postid"),t.data.siteid=a(t.activeButton).attr("data-siteid"),t.data.favorite_count=a(t.activeButton).attr("data-favoritecount"),t.data.site_index=t.utilities.siteIndex(t.data.siteid),t.data.site_favorites=Favorites.userFavorites[t.data.site_index].posts},t.bindEvents()},(Favorites=Favorites||{}).TotalCount=function(){var t=this,a=jQuery;return t.bindEvents=function(){a(document).on("favorites-updated-single",function(){t.updateTotal()}),a(document).on("favorites-cleared",function(){t.updateTotal()})},t.updateTotal=function(){for(var t=0;t<a(Favorites.selectors.total_favorites).length;t++){for(var o=a(Favorites.selectors.total_favorites)[t],e=parseInt(a(o).attr("data-siteid")),i=a(o).attr("data-posttypes").split(","),s=0,n=0;n<Favorites.userFavorites.length;n++){var r=Favorites.userFavorites[n];r.site_id===e&&a.each(r.posts,function(){"all"!==a(o).attr("data-posttypes")?-1!==a.inArray(this.post_type,i)&&s++:s++})}a(o).text(s)}},t.bindEvents()},(Favorites=Favorites||{}).RequireAuthentication=function(){var t=this,a=jQuery;return t.bindEvents=function(){a(document).on("favorites-require-authentication",function(){t.openModal()}),a(document).on("click",".simplefavorites-modal-backdrop",function(a){t.closeModal()}),a(document).on("click","["+Favorites.selectors.close_modals+"]",function(a){a.preventDefault(),t.closeModal()})},t.openModal=function(){t.buildModal(),setTimeout(function(){a("["+Favorites.selectors.modals+"]").addClass("active")},10)},t.buildModal=function(){if(!(a("["+Favorites.selectors.modals+"]").length>0)){var t='<div class="simplefavorites-modal-backdrop" '+Favorites.selectors.modals+"></div>";t+='<div class="simplefavorites-modal-content" '+Favorites.selectors.modals+">",t+='<div class="simplefavorites-modal-content-body">',t+=Favorites.jsData.authentication_modal_content,t+="</div>\x3c!-- .simplefavorites-modal-content-body --\x3e",t+="</div>\x3c!-- .simplefavorites-modal-content --\x3e",a("body").prepend(t)}},t.closeModal=function(){a("["+Favorites.selectors.modals+"]").removeClass("active")},t.bindEvents()},jQuery(document).ready(function(){new Favorites.Factory}),(Favorites=Favorites||{}).selectors={button:".simplefavorite-button",list:".favorites-list",clear_button:".simplefavorites-clear",total_favorites:".simplefavorites-user-count",modals:"data-favorites-modal",close_modals:"data-favorites-modal-close",count:".simplefavorite-button-count"},Favorites.cssClasses={loading:"loading",active:"active"},Favorites.jsData={ajaxurl:favorites_data.ajaxurl,nonce:null,favorite:favorites_data.favorite,favorited:favorites_data.favorited,include_count:favorites_data.includecount,indicate_loading:favorites_data.indicate_loading,loading_text:favorites_data.loading_text,loading_image_active:favorites_data.loading_image_active,loading_image:favorites_data.loading_image,cache_enabled:favorites_data.cache_enabled,authentication_modal_content:favorites_data.authentication_modal_content,button_options:favorites_data.button_options},Favorites.userFavorites=null,Favorites.formActions={nonce:"favorites_nonce",favoritesarray:"favorites_array",favorite:"favorites_favorite",clearall:"favorites_clear",favoritelist:"favorites_list"},Favorites.Factory=function(){var t=this;jQuery;return t.build=function(){new Favorites.NonceGenerator,new Favorites.UserFavorites,new Favorites.Lists,new Favorites.Clear,new Favorites.Button,new Favorites.ButtonUpdater,new Favorites.TotalCount,new Favorites.RequireAuthentication},t.build()};