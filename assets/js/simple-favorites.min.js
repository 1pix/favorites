function after_favorite_submit(){}function before_clear_favorites(){}jQuery(function(t){function a(){t.ajax({url:simple_favorites.ajaxurl,type:"post",datatype:"json",data:{action:"simplefavoritesnonce"},success:function(t){i(t.nonce)}})}function i(a){var i='<script type="text/javascript"> var simple_favorites_nonce = "'+a+'" ;</script>';t("head").append(i),e(),l()}function e(){t.ajax({url:simple_favorites.ajaxurl,type:"post",datatype:"json",data:{action:"simplefavorites_array"},success:function(a){var i=[];t.each(a.favorites,function(t,a){i[t]=a}),s(a.favorites)}})}function s(a){var i=t(".simplefavorite-button");t.each(i,function(i){for(var e=t(this).data("postid"),s=t(this).data("siteid"),o=t(this).attr("data-favoritecount"),l="",i=0;i<a.length;i++)a[i].site_id===s&&(r(e,a[i].site_favorites)?(o=a[i].total[e],l=n(simple_favorites.favorited,o),t(this).addClass("active").html(l)):(l=n(simple_favorites.favorite,o),t(this).removeClass("active").html(l)),t(this).removeClass("loading"))}),o(a)}function o(a){for(var i=0;i<a.length;i++){var e=t(".simplefavorites-clear[data-siteid="+a[i].site_id+"]");a[i].site_favorites.length>0?t(e).attr("disabled",!1):t(e).attr("disabled","disabled;")}var e=t(".simplefavorite-button.active")}function n(t,a){return"1"===simple_favorites.includecount&&(t+=' <span class="simplefavorite-button-count">'+a+"<span>"),t}function r(a,i){var e=!1;return t.each(i,function(t,i){i===a&&(e=!0),parseInt(i)===a&&(e=!0)}),e}function l(){var a=t(".favorites-list");t.each(a,function(){var a=t(this).data("userid"),i=t(this).data("siteid"),e=t(this).data("links"),s=t(this);c(s,a,i,e)})}function c(a,i,e,s){"0"===i&&(i=null),t.ajax({url:simple_favorites.ajaxurl,type:"post",datatype:"json",data:{action:"simplefavorites_list",userid:i,siteid:e,links:s},success:function(i){t(a).replaceWith(i.list)}})}function f(a){var i=t(a).data("postid"),e=t(a).data("siteid"),s=parseInt(t(a).attr("data-favoritecount")),o="inactive",r="",l="";t(a).hasClass("active")?(t(a).removeClass("active"),0>s-1&&(s=1),t(a).attr("data-favoritecount",s-1),l=n(simple_favorites.favorite,s-1),r=v(l,o),t(a).html(r)):(o="active",t(a).addClass("active"),t(a).attr("data-favoritecount",s+1),l=n(simple_favorites.favorited,s+1),r=v(l,o),t(a).html(r)),t.ajax({url:simple_favorites.ajaxurl,type:"post",datatype:"json",data:{action:"simplefavorites",nonce:simple_favorites_nonce,postid:i,siteid:e,status:o},success:function(s){t(a).removeClass("loading"),t(a).html(l),t(a).attr("disabled",!1),"active"===o&&t(".simplefavorites-clear[data-siteid="+e+"]").attr("disabled",!1),s.has_favorites||t(".simplefavorites-clear[data-siteid="+e+"]").attr("disabled",!0),d(a,s.count),after_favorite_submit(i,o,e)}})}function d(a,i){t(a).find(".simplefavorite-button-count").text(i)}function v(t,a){return"1"!==simple_favorites.indicate_loading?t:"active"===a?simple_favorites.loading_text+simple_favorites.loading_image_active:simple_favorites.loading_text+simple_favorites.loading_image}function u(a){before_clear_favorites(a);var i=t(a).attr("data-siteid");t.ajax({url:simple_favorites.ajaxurl,type:"post",datatype:"json",data:{action:"simplefavorites_clear",nonce:simple_favorites_nonce,siteid:i},success:function(i){t(a).removeClass("loading"),p(i)}})}function p(a){var i=t(".simplefavorite-button.active.has-count");t.each(i,function(){var a=t(this).find(".simplefavorite-button-count"),i=t(a).text()-1;t(this).attr("data-favoritecount",i)}),s(a.favorites)}t(document).ready(function(){a()}),t(document).on("click",".simplefavorite-button",function(a){a.preventDefault();var i=t(this);t(this).addClass("loading"),t(this).attr("disabled","disabled"),f(i)}),t(document).on("click",".simplefavorites-clear",function(a){a.preventDefault(),t(this).addClass("loading"),t(this).attr("disabled","disabled"),u(t(this))})});